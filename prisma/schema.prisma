generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model assignments {
  idAssigment     Int              @id @default(autoincrement())
  titleAssignment String?          @db.VarChar(255)
  urlAssignment   String?          @db.VarChar(255)
  idLessons       Int
  lessons         lessons          @relation(fields: [idLessons], references: [idLessons], onDelete: NoAction, onUpdate: NoAction, map: "FK_Lesson_Assignment")
  assignmentuser  assignmentuser[]

  @@index([idLessons], map: "FK_Lesson_Assignment_idx")
}

model assignmentuser {
  idAssignmentUser Int         @id @default(autoincrement())
  assignmentId     Int
  userId           Int
  statusId         Int
  assignments      assignments @relation(fields: [assignmentId], references: [idAssigment], onDelete: NoAction, onUpdate: NoAction, map: "FK_Assignment_AssignmentUser")
  statustype       statustype  @relation(fields: [statusId], references: [idStatusType], onDelete: NoAction, onUpdate: NoAction, map: "FK_Status_AssignmentUser")
  users            users       @relation(fields: [userId], references: [idUser], onDelete: NoAction, onUpdate: NoAction, map: "FK_User_AssignmentUser")

  @@index([assignmentId], map: "FK_Assignment_AssignmentUser_idx")
  @@index([statusId], map: "FK_Status_AssignmentUser_idx")
  @@index([userId], map: "FK_User_AssignmentUser_idx")
}

model chapters {
  idChapter    Int       @id @default(autoincrement())
  titleChapter String    @db.VarChar(255)
  courseId     Int
  isPublished  Boolean?
  orderChapter Int?
  description  String?   @db.VarChar(255)
  courses      courses   @relation(fields: [courseId], references: [idCourse], onDelete: NoAction, onUpdate: NoAction, map: "FK_Course_Chapter")
  lessons      lessons[]

  @@index([courseId], map: "FK_Course_Chapter_idx")
}

model courses {
  idCourse    Int          @id @default(autoincrement())
  titleCourse String?      @db.VarChar(255)
  price       Int?
  introduce   String?      @db.VarChar(255)
  image       String?      @db.VarChar(255)
  teacherId   Int
  isPublished Boolean?
  chapters    chapters[]
  users       users        @relation(fields: [teacherId], references: [idUser], onDelete: NoAction, onUpdate: NoAction, map: "FK_User_Course")
  courseuser  courseuser[]
  purchase    purchase[]

  @@index([teacherId], map: "FK_User_Course_idx")
}

model courseuser {
  idCourseUser Int        @id @default(autoincrement())
  userId       Int
  courseId     Int
  statusId     Int
  courses      courses    @relation(fields: [courseId], references: [idCourse], onDelete: NoAction, onUpdate: NoAction, map: "FK_Course_CourseUser")
  statustype   statustype @relation(fields: [statusId], references: [idStatusType], onDelete: NoAction, onUpdate: NoAction, map: "FK_Status_CourseUser")
  users        users      @relation(fields: [userId], references: [idUser], onDelete: NoAction, onUpdate: NoAction, map: "FK_User_CourseUser")

  @@index([courseId], map: "FK_Course_CourseUser_idx")
  @@index([statusId], map: "FK_Status_CourseUser_idx")
  @@index([userId], map: "FK_User_CourseUser_idx")
}

model lessons {
  idLessons    Int           @id @default(autoincrement())
  titleLessons String?       @db.VarChar(255)
  chapterId    Int
  isPublished  Boolean?
  orderLesson  Int?
  videoUrl     String?       @db.VarChar(255)
  assignments  assignments[]
  chapters     chapters      @relation(fields: [chapterId], references: [idChapter], onDelete: NoAction, onUpdate: NoAction, map: "FK_Chapter_Lessons")
  lessonuser   lessonuser[]
  quizzs       quizzs[]
  videolesson  videolesson[]

  @@index([chapterId], map: "FK_Chapter_Lessons_idx")
}

model lessonuser {
  idLessonUser Int        @id @default(autoincrement())
  userId       Int
  lessonId     Int
  statusId     Int
  lessons      lessons    @relation(fields: [lessonId], references: [idLessons], onDelete: NoAction, onUpdate: NoAction, map: "FK_Lesson_LessonUser")
  statustype   statustype @relation(fields: [statusId], references: [idStatusType], onDelete: NoAction, onUpdate: NoAction, map: "FK_Status_LessonUser")
  users        users      @relation(fields: [userId], references: [idUser], onDelete: NoAction, onUpdate: NoAction, map: "FK_User_LessonUser")

  @@index([lessonId], map: "FK_Lesson_LessonUser_idx")
  @@index([statusId], map: "FK_Status_LessonUser_idx")
  @@index([userId], map: "FK_User_LessonUser_idx")
}

model questions {
  idQuestion     Int          @id
  questionTypeId Int
  content        String?      @db.VarChar(255)
  Acontent       String?      @db.VarChar(255)
  Bcontent       String?      @db.VarChar(255)
  Ccontent       String?      @db.VarChar(255)
  Dcontent       String?      @db.VarChar(255)
  answer         String?      @db.VarChar(255)
  quizzId        Int
  questiontype   questiontype @relation(fields: [questionTypeId], references: [idQuestionType], onDelete: NoAction, onUpdate: NoAction, map: "FK_QuestionType")
  quizzs         quizzs       @relation(fields: [quizzId], references: [idQuizz], onDelete: NoAction, onUpdate: NoAction, map: "FK_Quizz_Question")

  @@index([questionTypeId], map: "FK_QuestionType_idx")
  @@index([quizzId], map: "FK_Quizz_Question_idx")
}

model questiontype {
  idQuestionType   Int         @id @default(autoincrement())
  nameQuestionType String?     @db.VarChar(255)
  questions        questions[]
}

model quizzs {
  idQuizz     Int         @id @default(autoincrement())
  nameQuizz   String?     @db.VarChar(255)
  description String?     @db.VarChar(255)
  idLessons   Int
  questions   questions[]
  lessons     lessons     @relation(fields: [idLessons], references: [idLessons], onDelete: NoAction, onUpdate: NoAction, map: "FK_Lesson_Quizz")
  quizzuser   quizzuser[]

  @@index([idLessons], map: "FK_Lesson_Quizz_idx")
}

model quizzuser {
  idQuizzUser Int        @id @default(autoincrement())
  quizzId     Int
  userId      Int
  statusId    Int
  quizzs      quizzs     @relation(fields: [quizzId], references: [idQuizz], onDelete: NoAction, onUpdate: NoAction, map: "FK_Quizz_QuizzUser")
  statustype  statustype @relation(fields: [statusId], references: [idStatusType], onDelete: NoAction, onUpdate: NoAction, map: "FK_Status_QuizzUser")
  users       users      @relation(fields: [userId], references: [idUser], onDelete: NoAction, onUpdate: NoAction, map: "FK_User_QuizzUser")

  @@index([quizzId], map: "FK_Quizz_QuizzUser_idx")
  @@index([statusId], map: "FK_Status_QuizzUser_idx")
  @@index([userId], map: "FK_User_QuizzUser_idx")
}

model role {
  idRole   Int     @id @default(autoincrement())
  nameRole String? @db.VarChar(255)
  users    users[]
}

model statustype {
  idStatusType   Int              @id @default(autoincrement())
  nameStatusType String?          @db.VarChar(255)
  assignmentuser assignmentuser[]
  courseuser     courseuser[]
  lessonuser     lessonuser[]
  quizzuser      quizzuser[]
}

model users {
  idUser         Int              @id @default(autoincrement())
  username       String           @db.VarChar(255)
  roleId         Int
  password       String           @db.VarChar(255)
  dateCreate     DateTime?        @db.Date
  isLocked       Boolean?
  assignmentuser assignmentuser[]
  courses        courses[]
  courseuser     courseuser[]
  lessonuser     lessonuser[]
  purchase       purchase[]
  quizzuser      quizzuser[]
  role           role             @relation(fields: [roleId], references: [idRole], onDelete: NoAction, onUpdate: NoAction, map: "FK_Role_User")

  @@index([roleId], map: "FK_Role_User_idx")
}

model videolesson {
  idVideo    Int     @id @default(autoincrement())
  idLesson   Int
  idAsset    String  @db.VarChar(255)
  idPlayback String? @db.VarChar(255)
  lessons    lessons @relation(fields: [idLesson], references: [idLessons], onDelete: NoAction, onUpdate: NoAction, map: "FK_Lesson_Video")

  @@index([idLesson], map: "FK_Lesson_Video_idx")
}

model payment {
  idPayment     Int       @id @default(autoincrement())
  idPurchase    Int
  amount        Int?
  paymentDate   DateTime? @db.Date
  paymentMethod String?   @db.VarChar(255)
  purchase      purchase  @relation(fields: [idPurchase], references: [idPurchase], onDelete: NoAction, onUpdate: NoAction, map: "FK_Purchase_Payment")

  @@index([idPurchase], map: "FK_Purchase_Payment_idx")
}

model purchase {
  idPurchase   Int       @id @default(autoincrement())
  idCourse     Int
  idUser       Int
  purchaseDate DateTime? @db.Date
  payment      payment[]
  courses      courses   @relation(fields: [idCourse], references: [idCourse], onDelete: NoAction, onUpdate: NoAction, map: "FK_Course_Purchase")
  users        users     @relation(fields: [idUser], references: [idUser], onDelete: NoAction, onUpdate: NoAction, map: "FK_User_Purchase")

  @@index([idCourse], map: "FK_Course_Purchase_idx")
  @@index([idUser], map: "FK_User_Purchase_idx")
}
